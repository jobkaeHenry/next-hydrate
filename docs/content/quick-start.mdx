---
title: "Quick Start"
slug: "/docs/quick-start"
description: "Get up and running with next-hydrate in minutes"
---

## Step 1: Setup Query Provider

First, wrap your application with the `QueryProvider` in your root layout:

```tsx
// app/layout.tsx
import { QueryProvider } from '@jobkaehenry/next-hydrate';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>
        <QueryProvider>{children}</QueryProvider>
      </body>
    </html>
  );
}
```

## Step 2: Server-Side Data Fetching

In your server component, use `getHydrationProps` to prefetch data:

```tsx
// app/posts/page.tsx
import { getHydrationProps } from '@jobkaehenry/next-hydrate';
import PostsClient from './PostsClient';

export default async function PostsPage() {
  const hydration = await getHydrationProps({
    queries: [
      {
        key: ['posts'],
        fetchFn: async () => {
          const res = await fetch(`${process.env.API_URL}/api/posts`, {
            next: { revalidate: 60, tags: ['posts'] }
          });
          if (!res.ok) throw new Error('Failed to fetch posts');
          return res.json();
        },
      },
    ],
  });

  return <PostsClient dehydratedState={hydration.dehydratedState} />;
}
```

## Step 3: Client Component

Create a client component that uses the hydrated data:

```tsx
// app/posts/PostsClient.tsx
'use client';

import { withHydration } from '@jobkaehenry/next-hydrate';
import { useQuery } from '@tanstack/react-query';

function PostsClientBase() {
  const { data: posts } = useQuery({
    queryKey: ['posts'],
    queryFn: async () => {
      const res = await fetch('/api/posts');
      return res.json();
    },
  });

  return (
    <div>
      <h1>Posts</h1>
      {posts?.map((post) => (
        <div key={post.id}>{post.title}</div>
      ))}
    </div>
  );
}

export default withHydration(PostsClientBase);
```

## Alternative: Using HydrateClient

If you prefer composition over HOCs, you can use `HydrateClient` directly:

```tsx
// app/posts/PostsClient.tsx
'use client';

import { HydrateClient } from '@jobkaehenry/next-hydrate';
import PostsView from './PostsView';

export default function PostsClient({ dehydratedState }) {
  return (
    <HydrateClient state={dehydratedState}>
      <PostsView />
    </HydrateClient>
  );
}
```

## That's It!

You've successfully set up `next-hydrate` in your Next.js application. The library will automatically:

- Detect the rendering mode (SSR/ISR/SSG/CSR)
- Prefetch queries on the server
- Hydrate the client with server data
- Fall back to CSR if the payload is too large

## What's Next?

- Learn about [Fetch Modes](/docs/fetch-modes)
- Explore the [API Reference](/docs/api)
- Check out [Examples](/docs/examples) for common use cases
