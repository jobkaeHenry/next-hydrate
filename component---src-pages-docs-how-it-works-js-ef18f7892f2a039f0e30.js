"use strict";(self.webpackChunk_jobkaehenry_next_hydrate_docs=self.webpackChunk_jobkaehenry_next_hydrate_docs||[]).push([[644],{9583:function(e,t,l){l.r(t);var n=l(758),r=l(2557),a=l(3912),i=l(1145);t.default=()=>n.createElement(n.Fragment,null,n.createElement(i.A,{title:"How It Works - next-hydrate",description:"Understanding the internals of next-hydrate and how it manages hydration",pathname:"/docs/how-it-works"}),n.createElement(r.A,null,n.createElement("h1",null,"How It Works"),n.createElement("h2",null,"Overview"),n.createElement("p",null,n.createElement("code",null,"next-hydrate")," provides a sophisticated hydration system that seamlessly integrates with Next.js App Router and React Query v5. This guide explains the core concepts and internal mechanisms."),n.createElement("h2",null,"Architecture"),n.createElement("h3",null,"Fetch Mode Detection"),n.createElement("p",null,"The library automatically detects the rendering mode by analyzing the Next.js environment:"),n.createElement("ul",null,n.createElement("li",null,n.createElement("strong",null,"SSR Mode"),": Detected when running in a server component without static generation"),n.createElement("li",null,n.createElement("strong",null,"ISR Mode"),": Identified by the presence of ",n.createElement("code",null,"revalidate")," ","configuration"),n.createElement("li",null,n.createElement("strong",null,"SSG Mode"),": Detected during build-time static generation"),n.createElement("li",null,n.createElement("strong",null,"CSR Mode"),": Fallback mode for client-side only rendering")),n.createElement("h3",null,"QueryClient Management"),n.createElement("p",null,"Server-side QueryClient instances are created per request to ensure:"),n.createElement("ul",null,n.createElement("li",null,"Data isolation between requests"),n.createElement("li",null,"Memory efficiency"),n.createElement("li",null,"Automatic cleanup after hydration"),n.createElement("li",null,"Thread-safe operations")),n.createElement("h3",null,"Hydration Process"),n.createElement("ol",null,n.createElement("li",null,n.createElement("strong",null,"Server-Side Data Fetching"),": Queries are executed on the server using"," ",n.createElement("code",null,"getHydrationProps()")),n.createElement("li",null,n.createElement("strong",null,"State Serialization"),": Query cache is dehydrated into JSON-serializable format"),n.createElement("li",null,n.createElement("strong",null,"Client Hydration"),": Dehydrated state is rehydrated on the client"),n.createElement("li",null,n.createElement("strong",null,"Query Synchronization"),": Client queries sync with server state seamlessly")),n.createElement("h2",null,"Performance Optimizations"),n.createElement("h3",null,"Concurrency Control"),n.createElement("p",null,"Limits parallel server-side fetches to prevent resource exhaustion:"),n.createElement(a.A,{code:"const props = await getHydrationProps({\n  queryClient,\n  queries: [...], // Automatically throttled\n})",language:"typescript"}),n.createElement("h3",null,"Payload Size Monitoring"),n.createElement("p",null,"Automatically falls back to CSR when server payload exceeds limits:"),n.createElement("ul",null,n.createElement("li",null,"Prevents hydration performance issues"),n.createElement("li",null,"Maintains fast page loads"),n.createElement("li",null,"Graceful degradation")),n.createElement("h3",null,"Memory Management"),n.createElement("ul",null,n.createElement("li",null,"Automatic QueryClient disposal after hydration"),n.createElement("li",null,"Query deduplication"),n.createElement("li",null,"Efficient cache serialization")),n.createElement("h2",null,"Data Flow"),n.createElement(a.A,{code:"Server Component → getHydrationProps() → Execute Queries → Dehydrate State\n                                                               ↓\nClient Component ← Rehydrate State ← Parse Dehydrated State ←",language:"text"}),n.createElement("h2",null,"Error Handling"),n.createElement("p",null,"The library provides comprehensive error handling:"),n.createElement("ul",null,n.createElement("li",null,"Query failures don't break hydration"),n.createElement("li",null,"Integrated logging for debugging"),n.createElement("li",null,"Graceful fallbacks to CSR")),n.createElement("h2",null,"Next Steps"),n.createElement("ul",null,n.createElement("li",null,"Learn about different ",n.createElement("a",{href:"/docs/fetch-modes"},"Fetch Modes")),n.createElement("li",null,"Explore the ",n.createElement("a",{href:"/docs/api"},"API Reference")),n.createElement("li",null,"See ",n.createElement("a",{href:"/docs/examples"},"Examples")," in action"))))}}]);
//# sourceMappingURL=component---src-pages-docs-how-it-works-js-ef18f7892f2a039f0e30.js.map