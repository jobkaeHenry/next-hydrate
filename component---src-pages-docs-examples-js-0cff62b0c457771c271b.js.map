{"version":3,"file":"component---src-pages-docs-examples-js-0cff62b0c457771c271b.js","mappings":"iNA+RA,UAxRqBA,KACnB,MAAM,EAAEC,IAAMC,EAAAA,EAAAA,kBAyOd,OACEC,EAAAA,cAAAA,EAAAA,SAAA,KACEA,EAAAA,cAACC,EAAAA,EAAG,CACFC,MAAOJ,EAAE,0BACTK,YAAaL,EAAE,gCACfM,SAAS,mBAEXJ,EAAAA,cAACK,EAAAA,EAAS,KACRL,EAAAA,cAAA,UAAKF,EAAE,wBAEPE,EAAAA,cAAA,UAAKF,EAAE,iCACPE,EAAAA,cAAA,SAAIF,EAAE,uCACNE,EAAAA,cAACM,EAAAA,EAAS,CAACC,KApPH,2jEAoPmBC,SAAS,MAAMN,MAAM,uBAEhDF,EAAAA,cAAA,UAAKF,EAAE,wCACPE,EAAAA,cAAA,SAAIF,EAAE,8CACNE,EAAAA,cAACM,EAAAA,EAAS,CAACC,KAnKI,8VAmKmBC,SAAS,QAE3CR,EAAAA,cAAA,UAAKF,EAAE,4BACPE,EAAAA,cAAA,SAAIF,EAAE,kCACNE,EAAAA,cAACM,EAAAA,EAAS,CAACC,KArJD,wgBAqJmBC,SAAS,QAEtCR,EAAAA,cAAA,UAAKF,EAAE,6CACPE,EAAAA,cAAA,SAAIF,EAAE,mDACNE,EAAAA,cAACM,EAAAA,EAAS,CAACC,KAtIS,yVAsImBC,SAAS,QAEhDR,EAAAA,cAAA,UAAKF,EAAE,uCACPE,EAAAA,cAAA,SAAIF,EAAE,6CACNE,EAAAA,cAACM,EAAAA,EAAS,CAACC,KA3HG,qVA2HmBC,SAAS,QAE1CR,EAAAA,cAAA,UAAKF,EAAE,sCACPE,EAAAA,cAAA,SAAIF,EAAE,4CACNE,EAAAA,cAACM,EAAAA,EAAS,CAACC,KAjHE,8wBAiHmBC,SAAS,QAEzCR,EAAAA,cAAA,UAAKF,EAAE,sCACPE,EAAAA,cAAA,SAAIF,EAAE,4CACNE,EAAAA,cAACM,EAAAA,EAAS,CAACC,KAjFE,qgBAiFmBC,SAAS,QAEzCR,EAAAA,cAAA,UAAKF,EAAE,iCACPE,EAAAA,cAAA,SAAIF,EAAE,uCACNE,EAAAA,cAACM,EAAAA,EAAS,CAACC,KAjEH,qnBAiEmBC,SAAS,U","sources":["webpack://@jobkaehenry/next-hydrate-docs/./src/pages/docs/examples.js"],"sourcesContent":["import React from 'react'\r\nimport { graphql } from 'gatsby'\r\nimport { useTranslation } from 'gatsby-plugin-react-i18next'\r\nimport DocLayout from '../../components/DocLayout'\r\nimport CodeBlock from '../../components/CodeBlock'\r\nimport SEO from '../../components/SEO'\r\n\r\nconst ExamplesPage = () => {\r\n  const { t } = useTranslation()\r\n  const basicSSR = `// ========== 서버 컴포넌트 ==========\r\n// app/users/page.tsx\r\nimport { getHydrationProps } from '@jobkaehenry/next-hydrate';\r\nimport UsersClient from './UsersClient';\r\n\r\nexport default async function UsersPage() {\r\n  const hydration = await getHydrationProps({\r\n    queries: [\r\n      {\r\n        key: ['users'],\r\n        fetchFn: async () => {\r\n          const res = await fetch('https://api.example.com/users');\r\n          return res.json();\r\n        },\r\n      },\r\n    ],\r\n  });\r\n\r\n  return <UsersClient dehydratedState={hydration.dehydratedState} />;\r\n}\r\n\r\n// ========== 클라이언트 컴포넌트 (withHydration HOC 사용) ==========\r\n// app/users/UsersClient.tsx\r\n'use client';\r\nimport { withHydration } from '@jobkaehenry/next-hydrate';\r\nimport { useQuery } from '@tanstack/react-query';\r\n\r\nfunction UsersClientBase() {\r\n  // 서버에서 미리 가져온 데이터가 자동으로 hydrate됨\r\n  const { data: users, isLoading } = useQuery({\r\n    queryKey: ['users'],\r\n    queryFn: async () => {\r\n      const res = await fetch('https://api.example.com/users');\r\n      return res.json();\r\n    },\r\n  });\r\n\r\n  if (isLoading) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div>\r\n      <h1>Users</h1>\r\n      {users?.map((user) => (\r\n        <div key={user.id}>{user.name}</div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\n// withHydration HOC로 감싸서 자동 hydration\r\nexport default withHydration(UsersClientBase);\r\n\r\n// ========== 또는 HydrateClient 직접 사용 ==========\r\n// app/users/UsersClient.tsx (대안)\r\n'use client';\r\nimport { HydrateClient } from '@jobkaehenry/next-hydrate';\r\nimport { useQuery } from '@tanstack/react-query';\r\n\r\nfunction UsersView() {\r\n  const { data: users } = useQuery({\r\n    queryKey: ['users'],\r\n    queryFn: async () => {\r\n      const res = await fetch('https://api.example.com/users');\r\n      return res.json();\r\n    },\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      <h1>Users</h1>\r\n      {users?.map((user) => (\r\n        <div key={user.id}>{user.name}</div>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function UsersClient({ dehydratedState }) {\r\n  return (\r\n    <HydrateClient state={dehydratedState}>\r\n      <UsersView />\r\n    </HydrateClient>\r\n  );\r\n}`\r\n\r\n  const multipleQueries = `const hydration = await getHydrationProps({\r\n  queries: [\r\n    {\r\n      key: ['posts'],\r\n      fetchFn: () => fetchPosts(),\r\n    },\r\n    {\r\n      key: ['categories'],\r\n      fetchFn: () => fetchCategories(),\r\n    },\r\n    {\r\n      key: ['tags'],\r\n      fetchFn: () => fetchTags(),\r\n    },\r\n  ],\r\n  concurrency: 3, // Control parallel execution\r\n});`\r\n\r\n  const isrExample = `export default async function ProductPage() {\r\n  const hydration = await getHydrationProps({\r\n    queries: [\r\n      {\r\n        key: ['product', id],\r\n        fetchFn: async () => {\r\n          const res = await fetch(\\`/api/products/\\${id}\\`, {\r\n            next: { revalidate: 3600 } // Revalidate every hour\r\n          });\r\n          return res.json();\r\n        },\r\n      },\r\n    ],\r\n    revalidate: 3600, // ISR revalidation interval\r\n  });\r\n\r\n  return <ProductClient dehydratedState={hydration.dehydratedState} />;\r\n}`\r\n\r\n  const conditionalHydration = `const hydration = await getHydrationProps({\r\n  queries: [\r\n    {\r\n      key: ['public-data'],\r\n      fetchFn: () => fetchPublicData(),\r\n      hydrate: true, // Include in hydration\r\n    },\r\n    {\r\n      key: ['user-specific'],\r\n      fetchFn: () => fetchUserData(),\r\n      hydrate: false, // Skip hydration, fetch on client\r\n    },\r\n  ],\r\n});`\r\n\r\n  const payloadControl = `const hydration = await getHydrationProps({\r\n  queries: [\r\n    {\r\n      key: ['large-dataset'],\r\n      fetchFn: () => fetchLargeData(),\r\n      shouldDehydrate: (data) => {\r\n        // Only hydrate if data is small enough\r\n        return data.items.length < 100;\r\n      },\r\n    },\r\n  ],\r\n  maxPayloadKB: 500, // Increase payload limit\r\n});`\r\n\r\n  const infiniteQuery = `const hydration = await getHydrationProps({\r\n  queries: [\r\n    {\r\n      key: ['posts'],\r\n      fetchFn: () => fetchPosts({ page: 1 }),\r\n      pagesToHydrate: 2, // Hydrate first 2 pages\r\n    },\r\n  ],\r\n});\r\n\r\n// Client component\r\nfunction PostsList() {\r\n  const {\r\n    data,\r\n    fetchNextPage,\r\n    hasNextPage,\r\n  } = useInfiniteQuery({\r\n    queryKey: ['posts'],\r\n    queryFn: ({ pageParam = 1 }) => fetchPosts({ page: pageParam }),\r\n    getNextPageParam: (lastPage) => lastPage.nextPage,\r\n  });\r\n\r\n  return (\r\n    <div>\r\n      {data?.pages.map((page) =>\r\n        page.posts.map((post) => <Post key={post.id} {...post} />)\r\n      )}\r\n      {hasNextPage && (\r\n        <button onClick={() => fetchNextPage()}>\r\n          Load More\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}`\r\n\r\n  const errorHandling = `const hydration = await getHydrationProps({\r\n  queries: [\r\n    {\r\n      key: ['data'],\r\n      fetchFn: async () => {\r\n        try {\r\n          const res = await fetch('/api/data');\r\n          if (!res.ok) throw new Error('Fetch failed');\r\n          return res.json();\r\n        } catch (error) {\r\n          console.error('Prefetch error:', error);\r\n          // Return fallback data or rethrow\r\n          return { items: [] };\r\n        }\r\n      },\r\n    },\r\n  ],\r\n  devLog: true, // Enable logging to see errors\r\n});`\r\n\r\n  const withAuth = `import { cookies } from 'next/headers';\r\n\r\nexport default async function DashboardPage() {\r\n  const cookieStore = await cookies();\r\n  const token = cookieStore.get('auth-token')?.value;\r\n\r\n  const hydration = await getHydrationProps({\r\n    queries: [\r\n      {\r\n        key: ['user-data'],\r\n        fetchFn: async () => {\r\n          const res = await fetch('/api/user/data', {\r\n            headers: {\r\n              Authorization: \\`Bearer \\${token}\\`,\r\n            },\r\n          });\r\n          return res.json();\r\n        },\r\n      },\r\n    ],\r\n  });\r\n\r\n  return <DashboardClient dehydratedState={hydration.dehydratedState} />;\r\n}`\r\n\r\n  return (\r\n    <>\r\n      <SEO\r\n        title={t('docs.examples.seoTitle')}\r\n        description={t('docs.examples.seoDescription')}\r\n        pathname=\"/docs/examples\"\r\n      />\r\n      <DocLayout>\r\n        <h1>{t('docs.examples.title')}</h1>\r\n\r\n        <h2>{t('docs.examples.basicSSR.title')}</h2>\r\n        <p>{t('docs.examples.basicSSR.description')}</p>\r\n        <CodeBlock code={basicSSR} language=\"tsx\" title=\"app/users/page.tsx\" />\r\n\r\n        <h2>{t('docs.examples.multipleQueries.title')}</h2>\r\n        <p>{t('docs.examples.multipleQueries.description')}</p>\r\n        <CodeBlock code={multipleQueries} language=\"tsx\" />\r\n\r\n        <h2>{t('docs.examples.isr.title')}</h2>\r\n        <p>{t('docs.examples.isr.description')}</p>\r\n        <CodeBlock code={isrExample} language=\"tsx\" />\r\n\r\n        <h2>{t('docs.examples.conditionalHydration.title')}</h2>\r\n        <p>{t('docs.examples.conditionalHydration.description')}</p>\r\n        <CodeBlock code={conditionalHydration} language=\"tsx\" />\r\n\r\n        <h2>{t('docs.examples.payloadControl.title')}</h2>\r\n        <p>{t('docs.examples.payloadControl.description')}</p>\r\n        <CodeBlock code={payloadControl} language=\"tsx\" />\r\n\r\n        <h2>{t('docs.examples.infiniteQuery.title')}</h2>\r\n        <p>{t('docs.examples.infiniteQuery.description')}</p>\r\n        <CodeBlock code={infiniteQuery} language=\"tsx\" />\r\n\r\n        <h2>{t('docs.examples.errorHandling.title')}</h2>\r\n        <p>{t('docs.examples.errorHandling.description')}</p>\r\n        <CodeBlock code={errorHandling} language=\"tsx\" />\r\n\r\n        <h2>{t('docs.examples.withAuth.title')}</h2>\r\n        <p>{t('docs.examples.withAuth.description')}</p>\r\n        <CodeBlock code={withAuth} language=\"tsx\" />\r\n      </DocLayout>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default ExamplesPage\r\n\r\nexport const query = graphql`\r\n  query($language: String!) {\r\n    locales: allLocale(filter: {language: {eq: $language}}) {\r\n      edges {\r\n        node {\r\n          ns\r\n          data\r\n          language\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n"],"names":["ExamplesPage","t","useTranslation","React","SEO","title","description","pathname","DocLayout","CodeBlock","code","language"],"sourceRoot":""}