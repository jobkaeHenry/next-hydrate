"use strict";(self.webpackChunk_jobkaehenry_next_hydrate_docs=self.webpackChunk_jobkaehenry_next_hydrate_docs||[]).push([[224],{8979:function(e,n,t){t.r(n);var a=t(758),r=t(6909),s=t(2557),o=t(3912),i=t(1145);n.default=()=>{const{t:e}=(0,r.useTranslation)();return a.createElement(a.Fragment,null,a.createElement(i.A,{title:e("docs.examples.seoTitle"),description:e("docs.examples.seoDescription"),pathname:"/docs/examples"}),a.createElement(s.A,null,a.createElement("h1",null,e("docs.examples.title")),a.createElement("h2",null,e("docs.examples.basicSSR.title")),a.createElement("p",null,e("docs.examples.basicSSR.description")),a.createElement(o.A,{code:"// ========== 서버 컴포넌트 ==========\n// app/users/page.tsx\nimport { getHydrationProps } from '@jobkaehenry/next-hydrate';\nimport UsersClient from './UsersClient';\n\nexport default async function UsersPage() {\n  const hydration = await getHydrationProps({\n    queries: [\n      {\n        key: ['users'],\n        fetchFn: async () => {\n          const res = await fetch('https://api.example.com/users');\n          return res.json();\n        },\n      },\n    ],\n  });\n\n  return <UsersClient dehydratedState={hydration.dehydratedState} />;\n}\n\n// ========== 클라이언트 컴포넌트 (withHydration HOC 사용) ==========\n// app/users/UsersClient.tsx\n'use client';\nimport { withHydration } from '@jobkaehenry/next-hydrate';\nimport { useQuery } from '@tanstack/react-query';\n\nfunction UsersClientBase() {\n  // 서버에서 미리 가져온 데이터가 자동으로 hydrate됨\n  const { data: users, isLoading } = useQuery({\n    queryKey: ['users'],\n    queryFn: async () => {\n      const res = await fetch('https://api.example.com/users');\n      return res.json();\n    },\n  });\n\n  if (isLoading) return <div>Loading...</div>;\n\n  return (\n    <div>\n      <h1>Users</h1>\n      {users?.map((user) => (\n        <div key={user.id}>{user.name}</div>\n      ))}\n    </div>\n  );\n}\n\n// withHydration HOC로 감싸서 자동 hydration\nexport default withHydration(UsersClientBase);\n\n// ========== 또는 HydrateClient 직접 사용 ==========\n// app/users/UsersClient.tsx (대안)\n'use client';\nimport { HydrateClient } from '@jobkaehenry/next-hydrate';\nimport { useQuery } from '@tanstack/react-query';\n\nfunction UsersView() {\n  const { data: users } = useQuery({\n    queryKey: ['users'],\n    queryFn: async () => {\n      const res = await fetch('https://api.example.com/users');\n      return res.json();\n    },\n  });\n\n  return (\n    <div>\n      <h1>Users</h1>\n      {users?.map((user) => (\n        <div key={user.id}>{user.name}</div>\n      ))}\n    </div>\n  );\n}\n\nexport default function UsersClient({ dehydratedState }) {\n  return (\n    <HydrateClient state={dehydratedState}>\n      <UsersView />\n    </HydrateClient>\n  );\n}",language:"tsx",title:"app/users/page.tsx"}),a.createElement("h2",null,e("docs.examples.multipleQueries.title")),a.createElement("p",null,e("docs.examples.multipleQueries.description")),a.createElement(o.A,{code:"const hydration = await getHydrationProps({\n  queries: [\n    {\n      key: ['posts'],\n      fetchFn: () => fetchPosts(),\n    },\n    {\n      key: ['categories'],\n      fetchFn: () => fetchCategories(),\n    },\n    {\n      key: ['tags'],\n      fetchFn: () => fetchTags(),\n    },\n  ],\n  concurrency: 3, // Control parallel execution\n});",language:"tsx"}),a.createElement("h2",null,e("docs.examples.isr.title")),a.createElement("p",null,e("docs.examples.isr.description")),a.createElement(o.A,{code:"export default async function ProductPage() {\n  const hydration = await getHydrationProps({\n    queries: [\n      {\n        key: ['product', id],\n        fetchFn: async () => {\n          const res = await fetch(`/api/products/${id}`, {\n            next: { revalidate: 3600 } // Revalidate every hour\n          });\n          return res.json();\n        },\n      },\n    ],\n    revalidate: 3600, // ISR revalidation interval\n  });\n\n  return <ProductClient dehydratedState={hydration.dehydratedState} />;\n}",language:"tsx"}),a.createElement("h2",null,e("docs.examples.conditionalHydration.title")),a.createElement("p",null,e("docs.examples.conditionalHydration.description")),a.createElement(o.A,{code:"const hydration = await getHydrationProps({\n  queries: [\n    {\n      key: ['public-data'],\n      fetchFn: () => fetchPublicData(),\n      hydrate: true, // Include in hydration\n    },\n    {\n      key: ['user-specific'],\n      fetchFn: () => fetchUserData(),\n      hydrate: false, // Skip hydration, fetch on client\n    },\n  ],\n});",language:"tsx"}),a.createElement("h2",null,e("docs.examples.payloadControl.title")),a.createElement("p",null,e("docs.examples.payloadControl.description")),a.createElement(o.A,{code:"const hydration = await getHydrationProps({\n  queries: [\n    {\n      key: ['large-dataset'],\n      fetchFn: () => fetchLargeData(),\n      shouldDehydrate: (data) => {\n        // Only hydrate if data is small enough\n        return data.items.length < 100;\n      },\n    },\n  ],\n  maxPayloadKB: 500, // Increase payload limit\n});",language:"tsx"}),a.createElement("h2",null,e("docs.examples.infiniteQuery.title")),a.createElement("p",null,e("docs.examples.infiniteQuery.description")),a.createElement(o.A,{code:"const hydration = await getHydrationProps({\n  queries: [\n    {\n      key: ['posts'],\n      fetchFn: () => fetchPosts({ page: 1 }),\n      pagesToHydrate: 2, // Hydrate first 2 pages\n    },\n  ],\n});\n\n// Client component\nfunction PostsList() {\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n  } = useInfiniteQuery({\n    queryKey: ['posts'],\n    queryFn: ({ pageParam = 1 }) => fetchPosts({ page: pageParam }),\n    getNextPageParam: (lastPage) => lastPage.nextPage,\n  });\n\n  return (\n    <div>\n      {data?.pages.map((page) =>\n        page.posts.map((post) => <Post key={post.id} {...post} />)\n      )}\n      {hasNextPage && (\n        <button onClick={() => fetchNextPage()}>\n          Load More\n        </button>\n      )}\n    </div>\n  );\n}",language:"tsx"}),a.createElement("h2",null,e("docs.examples.errorHandling.title")),a.createElement("p",null,e("docs.examples.errorHandling.description")),a.createElement(o.A,{code:"const hydration = await getHydrationProps({\n  queries: [\n    {\n      key: ['data'],\n      fetchFn: async () => {\n        try {\n          const res = await fetch('/api/data');\n          if (!res.ok) throw new Error('Fetch failed');\n          return res.json();\n        } catch (error) {\n          console.error('Prefetch error:', error);\n          // Return fallback data or rethrow\n          return { items: [] };\n        }\n      },\n    },\n  ],\n  devLog: true, // Enable logging to see errors\n});",language:"tsx"}),a.createElement("h2",null,e("docs.examples.withAuth.title")),a.createElement("p",null,e("docs.examples.withAuth.description")),a.createElement(o.A,{code:"import { cookies } from 'next/headers';\n\nexport default async function DashboardPage() {\n  const cookieStore = await cookies();\n  const token = cookieStore.get('auth-token')?.value;\n\n  const hydration = await getHydrationProps({\n    queries: [\n      {\n        key: ['user-data'],\n        fetchFn: async () => {\n          const res = await fetch('/api/user/data', {\n            headers: {\n              Authorization: `Bearer ${token}`,\n            },\n          });\n          return res.json();\n        },\n      },\n    ],\n  });\n\n  return <DashboardClient dehydratedState={hydration.dehydratedState} />;\n}",language:"tsx"})))}}}]);
//# sourceMappingURL=component---src-pages-docs-examples-js-0cff62b0c457771c271b.js.map